"use strict";

var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");

exports.__esModule = true;
exports["default"] = void 0;

var _reduceRight = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/reduce-right"));

var _entries = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/object/entries"));

var _forEach = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/for-each"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireDefault(require("react"));

var propTypes = {
  elements: _propTypes["default"].arrayOf(_propTypes["default"].oneOfType([// This should be an object of this same type, but recursive checks would
  // probably be too messy.
  _propTypes["default"].object, _propTypes["default"].element, _propTypes["default"].func])).isRequired
};

function accumulateElement(children, element) {
  if (!children) {
    return typeof element === 'function' ? element(null) : element;
  }

  if (!element) {
    return children;
  }

  if (! /*#__PURE__*/_react["default"].isValidElement(children)) {
    var _context;

    // Children come from named child routes.
    var groups = {};
    (0, _forEach["default"])(_context = (0, _entries["default"])(children)).call(_context, function (_ref) {
      var groupName = _ref[0],
          groupElements = _ref[1];
      groups[groupName] = (0, _reduceRight["default"])(groupElements).call(groupElements, accumulateElement, null);
    });
    return typeof element === 'function' ? element(groups) : /*#__PURE__*/_react["default"].cloneElement(element, groups);
  }

  return typeof element === 'function' ? element(children) : /*#__PURE__*/_react["default"].cloneElement(element, {
    children: children
  });
}

function ElementsRenderer(_ref2) {
  var elements = _ref2.elements;
  return (0, _reduceRight["default"])(elements).call(elements, accumulateElement, null);
}

ElementsRenderer.propTypes = propTypes;
var _default = ElementsRenderer;
exports["default"] = _default;
module.exports = exports.default;